__NUXT_JSONP__("/post/493", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return {data:[{post:{id:493,date:l,date_gmt:m,guid:{rendered:"https:\u002F\u002Fvolkruss.com\u002F?p=493"},modified:l,modified_gmt:m,slug:"conboattack",status:"publish",type:"post",link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002F2020\u002F08\u002F25\u002Fconboattack\u002F",title:{rendered:"超わかりやすいUnityちゃんでコンボアニメーション"},content:{rendered:"\n\u003Cp\u003E今回はUnityちゃんでコンボアニメーションを超わかりやすく作ってみます。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eまずはアニメーターを作成します。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-24-23.38.08.png\" alt=\"\" class=\"wp-image-496\" width=\"431\" height=\"312\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eアニメーションはアセットストアでfightで検索すればゴロゴロ出てくるので、適当に使います。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eそして作成したコントローラーをダブルクリックして、Animatorウインドウを表示します。\u003Cbr \u002F\u003Eそして３つほどステートを作成して画像のように線を引っ張ってください\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-0.03.25.png\" alt=\"\" class=\"wp-image-500\" width=\"511\" height=\"344\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003E一旦このようにします。\u003Cbr \u002F\u003E何をするかというとアニメーションを連続で再生します。まずはコンボ技なんて考えず、どういったアニメーションを連続で繰り出すのか見ていきましょう。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003EこのコントローラーをUnitychanにアタッチします。\u003Cbr \u002F\u003EこれでUnitychanが動く準備ができました。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-0.04.32-1-1024x506.png\" alt=\"\" class=\"wp-image-502\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003EまたAnimatorウインドウに戻って、追加した３つのステートに適当にアニメーションをつけます。\u003Cbr \u002F\u003Eステートを選択して、Motionにアニメーションを設定します。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-0.09.21-1024x350.png\" alt=\"\" class=\"wp-image-504\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eこれで再生するとUnitychanが連続コンボを繰り出しているのがわかります。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-0.10.46.png\" alt=\"\" class=\"wp-image-505\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eあとはボタンを押して制御できるようにしていきましょう。\u003C\u002Fp\u003E\n\n\n\u003Ch2\u003EStateMachineBehaviourを利用する\u003C\u002Fh2\u003E\n\n\n\u003Cp\u003E普段Unityからスクリプトを作成すると\u003Cstrong\u003EMonoBehaviour\u003C\u002Fstrong\u003Eというクラスを継承したクラスが作成されます。\u003Cbr \u002F\u003EStateMachineBehaviourというのはアニメーションの最初のフレームやら最後のフレームやれでメソッドを実行できるものです。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdocs.unity3d.com\u002Fja\u002Fcurrent\u002FScriptReference\u002FStateMachineBehaviour.html\"\u003Ehttps:\u002F\u002Fdocs.unity3d.com\u002Fja\u002Fcurrent\u002FScriptReference\u002FStateMachineBehaviour.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eというわけでスクリプトを作成して、このクラスを継承させる以下のコードを記載します\u003C\u002Fp\u003E\n\n\n\u003Cpre class=\"wp-block-code\"\u003E\u003Ccode\u003Eusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\npublic class UnityChanComb : StateMachineBehaviour\n{\n    \u002F\u002F 最初のフレームで呼ばれる\n    public override void OnStateEnter(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)\n    {\n        animator.SetBool(\"Attack\", false);\n    }\n    \u002F\u002F　最後のフレームで呼ばれる\n    public override void OnStateExit(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)\n    {\n        animator.SetBool(\"Attack\", false);\n    }\n    \u002F\u002F最初と最後のフレーム以外で呼ばれる\n    public override void OnStateUpdate(Animator animator, AnimatorStateInfo stateInfo, int layerIndex)\n    {\n        if (Input.GetKeyDown(KeyCode.A))\n        {\n            animator.SetBool(\"Attack\", true);\n        }\n    }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\n\n\u003Cp\u003E基本的にアニメーションが走った時にアニメーションを終了させるフラグを立てます。\u003Cbr \u002F\u003Eそうすることで一つのアニメーションが終わったら終わり。つまりコンボさせないことができます。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eコンボさせたいときは最初のフレーム以外でtrueにしておくというイメージです。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eでは作っていたコントローラーにAttackというboolのパラメータを追加して、トランジションの設定を行います。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-21.11.45.png\" alt=\"\" class=\"wp-image-508\" width=\"456\" height=\"155\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003EIdleステートを追加しておきます。ついでにSet as Layer Default Stateにします。これで初期ステートになります。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-21.16.25-1024x476.png\" alt=\"\" class=\"wp-image-509\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003E全ての線にAttack trueを設定しおきます。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-21.18.16-1024x657.png\" alt=\"\" class=\"wp-image-511\" width=\"516\" height=\"330\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eこれで再生するとIdle状態のままです。なんでかっていうと、Attackがtrueになっていないからです。さきほど作成したスクリプトをステートに適用します\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-22.12.44-1024x482.png\" alt=\"\" class=\"wp-image-513\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003EこれでAボタンを押した時に、アニメーションが再生されます。\u003Cbr \u002F\u003Eこのままではアニメーションが一つずつ進んでしまいます。\u003Cbr \u002F\u003EようするにAボタンを押すたびにコンボが進みます。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003E一度でもコンボが発生しない場合はIdleに戻してあげましょう。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-22.21.05-1024x631.png\" alt=\"\" class=\"wp-image-514\" width=\"584\" height=\"359\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eこれでコンボの完成です。連打しているとコンボになりますし、ボタンを押さないでいるとステートがアイドルに戻るようになりました。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-25-22.30.11.png\" alt=\"\" class=\"wp-image-516\" width=\"125\" height=\"185\"\u002F\u003E\u003C\u002Ffigure\u003E\n",protected:j},excerpt:{rendered:"\u003Cp\u003E今回はUnityちゃんでコンボアニメーションを超わかりやすく作ってみます。 まずはアニメーターを作成します。 アニメーションはアセットストアでfightで検索すればゴロゴロ出てくるので、適当に使います。 そして作成したコ&hellip; \u003Ca class=\"more-link\" href=\"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002F2020\u002F08\u002F25\u002Fconboattack\u002F\"\u003E続きを読む \u003Cspan class=\"screen-reader-text\"\u003E超わかりやすいUnityちゃんでコンボアニメーション\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",protected:j},author:n,featured_media:b,comment_status:o,ping_status:o,sticky:j,template:c,format:"standard",meta:[],categories:[k],tags:[51,58,66],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts\u002F493"}],collection:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts"}],about:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftypes\u002Fpost"}],author:[{embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fusers\u002F1"}],replies:[{embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcomments?post=493"}],"version-history":[{count:b,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts\u002F493\u002Frevisions"}],"wp:attachment":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fmedia?parent=493"}],"wp:term":[{taxonomy:d,embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories?post=493"},{taxonomy:"post_tag",embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftags?post=493"}],curies:[{name:e,href:f,templated:a}]}}}],fetch:{"0":{categories:{categories:[{id:2,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fblender\u002F",name:"Blender",slug:"blender",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F2"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=2"}],curies:[{name:e,href:f,templated:a}]}},{id:p,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fdocker\u002F",name:"Docker",slug:"docker",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F3"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=3"}],curies:[{name:e,href:f,templated:a}]}},{id:i,count:k,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fjava\u002F",name:"Java",slug:"java",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F4"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=4"}],curies:[{name:e,href:f,templated:a}]}},{id:q,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fjavascript\u002F",name:"JavaScript",slug:"javascript",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F5"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=5"}],curies:[{name:e,href:f,templated:a}]}},{id:k,count:40,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Funity\u002F",name:"Unity",slug:"unity",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F6"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=6"}],curies:[{name:e,href:f,templated:a}]}},{id:7,count:r,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fvue-js\u002F",name:"Vue.js",slug:"vue-js",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F7"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=7"}],curies:[{name:e,href:f,templated:a}]}},{id:8,count:q,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fwordpress\u002F",name:"WordPress",slug:"wordpress",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F8"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=8"}],curies:[{name:e,href:f,templated:a}]}},{id:r,count:p,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002F%e3%81%9d%e3%81%ae%e4%bb%96\u002F",name:"その他",slug:"%e3%81%9d%e3%81%ae%e4%bb%96",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F9"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=9"}],curies:[{name:e,href:f,templated:a}]}},{id:n,count:b,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Funcategorized\u002F",name:"未分類",slug:"uncategorized",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F1"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=1"}],curies:[{name:e,href:f,templated:a}]}}]}}},mutations:void 0}}(true,0,"","category","wp","https:\u002F\u002Fapi.w.org\u002F{rel}","https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories","https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftaxonomies\u002Fcategory",4,false,6,"2020-08-25T22:31:21","2020-08-25T13:31:21",1,"open",3,5,9)));