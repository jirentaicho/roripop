__NUXT_JSONP__("/post/518", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return {data:[{post:{id:518,date:m,date_gmt:n,guid:{rendered:"https:\u002F\u002Fvolkruss.com\u002F?p=518"},modified:m,modified_gmt:n,slug:"procameramanero",status:"publish",type:"post",link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002F2020\u002F08\u002F26\u002Fprocameramanero\u002F",title:{rendered:"Cinemachineを使ってノンコードカメラワークを実現する"},content:{rendered:"\n\u003Cp\u003Eプロアングルでの撮影も可能なプロカメラであるChinemachineを使ってUnityちゃんを動かします。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eキャラクターを動かそうとしたときにカメラの向いてる方向を起点として動かさないと思わぬ動きをすることがあります。例えば前進しようとしてるのに右に移動したり。理由は簡単で、プレイヤーの動く方向とカメラが写している方向がマッチしていないからです。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eなのでプレイヤーはカメラを起点にして動かします。\u003Cbr \u002F\u003Eそしてそのカメラにはある程度自動で動いてもらおうという考えです。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003E今回使うカメラがFreeLookカメラです。こいつは設定したキャラクターの周りを上中下のレベルで自由に動き回ることができるカメラで、よくわるサードパーソンカメラと同じような感じです。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003E以前書いた記事\u003Cbr \u002F\u003E⇨\u003Ca href=\"https:\u002F\u002Fvolkruss.com\u002F2020\u002F06\u002F13\u002Fcinemachine%e3%82%92%e3%81%97%e3%81%b0%e3%81%8f\u002F\"\u003Ehttps:\u002F\u002Fvolkruss.com\u002F2020\u002F06\u002F13\u002Fcinemachine%e3%82%92%e3%81%97%e3%81%b0%e3%81%8f\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\n\u003Cp\u003EFreeLookカメラを追加したら以下のように設定します。\u003Cbr \u002F\u003EFollow = unitychan\u003Cbr \u002F\u003ELook At = unitychanに追加した空のゲームオブジェクト(unitychanの頭の位置に設定します)\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-17.45.47-1024x288.png\" alt=\"\" class=\"wp-image-522\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003E次に大切な設定です。\u003Cbr \u002F\u003EBindingTypeをWordSpaceにします。これはですね、よくわかりませんが、カメラがワールド空間で同じ方向を向いてターゲットを追いかけるとUnityデザイナーズバイブルには書いてありますね。はい。（なんのことかさっぱりだわ）\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-17.48.00.png\" alt=\"\" class=\"wp-image-523\" width=\"244\" height=\"219\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eこれでカメラの動きはバッチリでーす\u003Cbr \u002F\u003EGameWindowGuidesをオンにするとガイドが表示されます。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-17.50.28.png\" alt=\"\" class=\"wp-image-524\" width=\"533\" height=\"415\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Ch2\u003Eスクリプトの記載\u003C\u002Fh2\u003E\n\n\n\u003Cp\u003Eカメラの向きを起点にして移動させます。\u003Cbr \u002F\u003E正直いってカメラの向きとかよくわからないので他のサイトを参考にしました。あざっす\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-table\"\u003E\u003Ctable\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003EVector3.Scale\u003C\u002Ftd\u003E\u003Ctd\u003E2 つのベクトルの各成分を乗算します\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003Etransform.forward\u003C\u002Ftd\u003E\u003Ctd\u003Eオブジェクトの正面の向き\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr\u003E\u003Ctd\u003EVector3.Normalize\u003C\u002Ftd\u003E\u003Ctd\u003Emagnitude を 1 としたベクトルを作成します\u003Cbr \u002F\u003EDebug.Log(new Vector3(1, 1, 1).normalized);\u003Cbr \u002F\u003E(0.6, 0.6, 0.6)\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003E\u003Cbr \u002F\u003E汚いけどコードです。変数を割り当てるなどして綺麗にするといいと思います。\u003Cbr \u002F\u003E正直normalizedがよくわからん。つけると動きが滑らかになっている感じがするが。\u003C\u002Fp\u003E\n\n\n\u003Cpre class=\"wp-block-code\"\u003E\u003Ccode\u003Eusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\npublic class UnityChanInput : MonoBehaviour\n{\n    &#91;SerializeField]\n    private Camera camera;\n    &#91;SerializeField]\n    private float moveSpeed = 0.05f;\n    void FixedUpdate()\n    {\n        float inputHorizontal = Input.GetAxisRaw(\"Horizontal\");\n        float inputVertical = Input.GetAxisRaw(\"Vertical\");\n        Vector3 movepos = inputVertical * Vector3.Scale(camera.transform.forward, new Vector3(1, 0, 1)).normalized * moveSpeed + inputHorizontal * camera.transform.right * moveSpeed;\n        transform.position = new Vector3(transform.position.x + movepos.x,0,transform.position.z + movepos.z);\n        \u002F\u002F 移動方向にプレイヤーを回転（向きを変える）\n        if(movepos != Vector3.zero) {\n            transform.rotation = Quaternion.LookRotation(movepos);\n        }\n    }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-18.59.45-1024x574.png\" alt=\"\" class=\"wp-image-530\" width=\"467\" height=\"261\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003EVector3.Scale(camera.transform.forward, new Vector3(1, 0, 1))としないと上の画像のようにカメラのY方向の回転まで計算されてしまう。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eこれである程度完成です。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003EあとはカメラのRigをいじってカメラの移動範囲を制限すると好みのカメラができると思います。\u003C\u002Fp\u003E\n\n\n\u003Cp\u003Eちなみに私はこんな感じにしました。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large is-resized\"\u003E\u003Cimg loading=\"lazy\" src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-20.50.11-502x1024.png\" alt=\"\" class=\"wp-image-534\" width=\"346\" height=\"705\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003EYAxisのInvertにチェックを入れてカメラの動きを逆転させました。\u003Cbr \u002F\u003E移動範囲も少し狭くして視界に制限をかけました。ここはお好みで。\u003C\u002Fp\u003E\n\n\n\u003Cfigure class=\"wp-block-image size-large\"\u003E\u003Cimg src=\"https:\u002F\u002Fvolkruss.com\u002Fwp-content\u002Fuploads\u002F2020\u002F08\u002Fスクリーンショット-2020-08-26-20.51.53.png\" alt=\"\" class=\"wp-image-535\"\u002F\u003E\u003C\u002Ffigure\u003E\n\n\n\u003Cp\u003Eカメラに対するスクリプトは一切書いてないですが、かっちょええ感じのカメラが勝手にできますし、パラメータもインスペクタタブから編集できるので、カメラをスクリプトから操作するよりも高性能かと思います。\u003C\u002Fp\u003E\n\n\n\u003Cblockquote class=\"wp-block-quote\"\u003E\u003Cp\u003Eメモ\u003C\u002Fp\u003E\u003Ccite\u003EスクリプトからBinding Modeを変更する\u003C\u002Fcite\u003E\u003C\u002Fblockquote\u003E\n\n\n\u003Cpre class=\"wp-block-code\"\u003E\u003Ccode\u003Evcamera.GetCinemachineComponent&lt;CinemachineTransposer\u003E().m_BindingMode = CinemachineTransposer.BindingMode.LockToTargetWithWorldUp;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\n\n\u003Cp\u003E\u003C\u002Fp\u003E\n",protected:j},excerpt:{rendered:"\u003Cp\u003Eプロアングルでの撮影も可能なプロカメラであるChinemachineを使ってUnityちゃんを動かします。 キャラクターを動かそうとしたときにカメラの向いてる方向を起点として動かさないと思わぬ動きをすることがあります。例&hellip; \u003Ca class=\"more-link\" href=\"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002F2020\u002F08\u002F26\u002Fprocameramanero\u002F\"\u003E続きを読む \u003Cspan class=\"screen-reader-text\"\u003ECinemachineを使ってノンコードカメラワークを実現する\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",protected:j},author:k,featured_media:b,comment_status:o,ping_status:o,sticky:j,template:c,format:"standard",meta:[],categories:[l],tags:[51],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts\u002F518"}],collection:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts"}],about:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftypes\u002Fpost"}],author:[{embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fusers\u002F1"}],replies:[{embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcomments?post=518"}],"version-history":[{count:b,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts\u002F518\u002Frevisions"}],"wp:attachment":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fmedia?parent=518"}],"wp:term":[{taxonomy:d,embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories?post=518"},{taxonomy:"post_tag",embeddable:a,href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftags?post=518"}],curies:[{name:e,href:f,templated:a}]}}}],fetch:{"0":{categories:{categories:[{id:2,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fblender\u002F",name:"Blender",slug:"blender",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F2"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=2"}],curies:[{name:e,href:f,templated:a}]}},{id:p,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fdocker\u002F",name:"Docker",slug:"docker",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F3"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=3"}],curies:[{name:e,href:f,templated:a}]}},{id:77,count:k,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fgulp\u002F",name:q,slug:q,taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F77"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=77"}],curies:[{name:e,href:f,templated:a}]}},{id:i,count:l,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fjava\u002F",name:"Java",slug:"java",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F4"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=4"}],curies:[{name:e,href:f,templated:a}]}},{id:r,count:i,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fjavascript\u002F",name:"JavaScript",slug:"javascript",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F5"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=5"}],curies:[{name:e,href:f,templated:a}]}},{id:l,count:40,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Funity\u002F",name:"Unity",slug:"unity",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F6"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=6"}],curies:[{name:e,href:f,templated:a}]}},{id:7,count:s,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fvue-js\u002F",name:"Vue.js",slug:"vue-js",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F7"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=7"}],curies:[{name:e,href:f,templated:a}]}},{id:8,count:r,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Fwordpress\u002F",name:"WordPress",slug:"wordpress",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F8"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=8"}],curies:[{name:e,href:f,templated:a}]}},{id:s,count:p,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002F%e3%81%9d%e3%81%ae%e4%bb%96\u002F",name:"その他",slug:"%e3%81%9d%e3%81%ae%e4%bb%96",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F9"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=9"}],curies:[{name:e,href:f,templated:a}]}},{id:k,count:b,description:c,link:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fcategory\u002Funcategorized\u002F",name:"未分類",slug:"uncategorized",taxonomy:d,parent:b,meta:[],_links:{self:[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories\u002F1"}],collection:[{href:g}],about:[{href:h}],"wp:post_type":[{href:"https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fposts?categories=1"}],curies:[{name:e,href:f,templated:a}]}}]}}},mutations:void 0}}(true,0,"","category","wp","https:\u002F\u002Fapi.w.org\u002F{rel}","https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Fcategories","https:\u002F\u002Fwww.volkruss.com\u002Fnuxt\u002Fapi\u002Fwp-json\u002Fwp\u002Fv2\u002Ftaxonomies\u002Fcategory",4,false,1,6,"2020-08-26T20:54:17","2020-08-26T11:54:17","open",3,"gulp",5,9)));